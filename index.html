<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Computerized Information for Small Businesses on Book Sales</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Apply theme immediately to prevent flash of unstyled content (FOUC)
        (function() {
            const savedTheme = localStorage.getItem('smeTheme');
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-hue: 35;
            --primary-saturation: 83%;
            --primary-lightness: 53%;
            --primary: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
            --primary-light: hsl(var(--primary-hue), var(--primary-saturation), 95%);
            --primary-dark: hsl(var(--primary-hue), var(--primary-saturation), 43%);
            
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            
            --surface-0: #ffffff;
            --surface-1: #f9fafb;
            --surface-2: #f3f4f6;
            
            --text-1: #111827;
            --text-2: #374151;
            --text-3: #6b7280;
            
            --border: #e5e7eb;
            --shadow-color: 220 3% 15%;
            --shadow-strength: 1%;
            --shadow-1: 0 1px 2px 0 rgba(0,0,0,0.05);
            --shadow-2: 0 1px 3px 0 rgba(0,0,0,0.1), 0 1px 2px -1px rgba(0,0,0,0.1);
            --shadow-3: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
            
            --background: var(--surface-1);
        }

        html.dark {
            --primary-lightness: 48%;
            --primary-light: hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.1);
            
            --surface-0: #111827;
            --surface-1: #1f2937;
            --surface-2: #374151;
            
            --text-1: #f9fafb;
            --text-2: #d1d5db;
            --text-3: #9ca3af;
            
            --border: #374151;
            --shadow-color: 220 3% 5%;
            --shadow-strength: 10%;
            
            --background: #0d1117;
        }

        html { height: 100%; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--background);
            color: var(--text-2);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100%;
            padding: 20px;
            transition: background 0.3s;
        }
        
        /* Auth Container */
        #auth-container {
            width: 100%;
            max-width: 400px;
            padding: 40px;
            background: var(--surface-0);
            border-radius: 20px;
            box-shadow: var(--shadow-3);
            text-align: center;
        }
        #auth-container h2 { font-size: 28px; margin-bottom: 10px; color: var(--text-1); }
        #auth-container p { color: var(--text-3); margin-bottom: 30px; }
        .auth-form { display: none; }
        .auth-form.active { display: block; }
        #auth-container .form-group input { text-align: left; }
        #auth-container .btn { width: 100%; justify-content: center; margin-top: 10px; }
        #auth-container .switch-form { margin-top: 20px; font-size: 14px; color: var(--text-3); }
        #auth-container .switch-form a { font-weight: 600; cursor: pointer; color: var(--primary); }

        /* Main App Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--surface-0);
            border-radius: 20px;
            box-shadow: var(--shadow-3);
            overflow: hidden;
            width: 100%;
            height: calc(100vh - 40px);
            max-height: 900px;
            display: none;
            flex-direction: column;
        }
        
        a { color: var(--primary); text-decoration: none; transition: color 0.3s; }
        a:hover { text-decoration: underline; }

        /* Header */
        .header {
            background: var(--surface-0);
            color: var(--text-1);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            border-bottom: 1px solid var(--border);
        }
        .header h1 { font-size: 22px; font-weight: 600; display: flex; align-items: center; gap: 12px; word-break: break-word; }
        .header-stats { display: flex; gap: 30px; }
        .stat { text-align: center; }
        .stat-value { font-size: 24px; font-weight: 700; color: var(--text-1); }
        .stat-label { font-size: 12px; opacity: 0.9; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-3); }
        .hamburger-menu { display: none; background: none; border: none; cursor: pointer; padding: 5px; }
        .hamburger-menu svg { stroke: var(--text-2); }

        /* Main Content */
        .main-content { display: grid; grid-template-columns: 260px 1fr; flex-grow: 1; overflow: hidden; }

        /* Sidebar */
        .sidebar { background: var(--surface-1); padding: 20px; border-right: 1px solid var(--border); display: flex; flex-direction: column; transition: transform 0.3s ease-in-out; }
        .sidebar .nav-group { flex-grow: 1; }
        .nav-btn { width: 100%; padding: 10px 15px; margin-bottom: 8px; border: none; background: transparent; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 12px; font-size: 15px; font-weight: 500; color: var(--text-2); transition: all 0.2s; }
        .nav-btn:hover { background: var(--surface-2); color: var(--text-1); }
        .nav-btn.active { background: var(--primary); color: white; }
        .nav-btn.active .icon svg { stroke: white; }
        .nav-btn.logout-btn:hover { background: var(--danger); color: white; }
        .nav-btn.logout-btn:hover .icon svg { stroke: white; }
        .nav-btn .icon { font-size: 20px; display: flex; align-items: center; }
        .nav-btn .icon svg { stroke: var(--text-3); transition: stroke 0.2s; }
        .nav-btn:hover .icon svg { stroke: var(--primary); }
        
        /* Content Area */
        .content-area { padding: 30px 40px; overflow-y: auto; -webkit-overflow-scrolling: touch; }
        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Search and Actions Bar */
        .actions-bar { display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; }
        .search-box { flex: 1; min-width: 200px; position: relative; }
        .search-box input { width: 100%; padding: 12px 20px 12px 45px; border: 1px solid var(--border); border-radius: 8px; font-size: 15px; transition: all 0.2s; background: var(--surface-0); color: var(--text-1); }
        .search-box input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-light); }
        .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--text-3); display: flex; align-items: center; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; }
        .btn svg { width: 16px; height: 16px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); box-shadow: var(--shadow-2); }
        .btn-secondary { background: var(--secondary); color: white; }
        .btn-secondary:hover { background: #059669; }
        .btn-danger { background: var(--danger); color: white; }

        /* Filter Bar & Grids */
        .filter-bar { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-select { padding: 10px 15px; border: 1px solid var(--border); border-radius: 8px; font-size: 14px; cursor: pointer; background: var(--surface-0); color: var(--text-1); }
        .data-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
        #genresGrid .card { cursor: pointer; }

        /* Card (Book, Genre) */
        .card { background: var(--surface-0); border: 1px solid var(--border); border-radius: 12px; padding: 20px; transition: all 0.2s; position: relative; box-shadow: var(--shadow-1); }
        .card:hover { border-color: var(--primary); box-shadow: var(--shadow-2); transform: translateY(-3px); }
        .card-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px; }
        .card-avatar { width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: 600; color: white; flex-shrink: 0; }
        .card-info { flex: 1; margin-left: 15px; }
        .card-title { font-size: 18px; font-weight: 600; color: var(--text-1); margin-bottom: 2px; }
        .card-subtitle { font-size: 14px; color: var(--text-3); }
        .card-title, .card-subtitle, .detail-row span, .activity-text { overflow-wrap: break-word; word-break: break-word; }
        .card-actions { display: flex; gap: 5px; }
        .icon-btn { width: 32px; height: 32px; border: none; background: transparent; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; color: var(--text-3); }
        .icon-btn svg { width: 18px; height: 18px; stroke: var(--text-3); transition: stroke 0.2s; }
        .icon-btn:hover { background: var(--surface-2); }
        .icon-btn:hover svg { stroke: var(--primary); }
        .card-details { margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border); }
        .detail-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 14px; color: var(--text-2); }
        .detail-row .icon { color: var(--text-3); display: flex; align-items: center; }
        .detail-row .icon svg { width: 16px; height: 16px; stroke: var(--text-3); }
        .badge { display: inline-block; padding: 4px 12px; background: var(--primary-light); border-radius: 20px; font-size: 12px; font-weight: 600; color: var(--primary); margin-top: 10px; }
        .card-footer { margin-top: 15px; }

        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(5px); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: var(--surface-0); border-radius: 16px; width: 90%; max-width: 600px; max-height: 90vh; display: flex; flex-direction: column; animation: modalSlideIn 0.3s; box-shadow: var(--shadow-3); }
        .modal-header { padding: 20px 30px; border-bottom: 1px solid var(--border); font-size: 20px; font-weight: 600; color: var(--text-1); }
        .modal-body { padding: 20px 30px; overflow-y: auto; }
        .modal-footer { display: flex; justify-content: flex-end; gap: 10px; padding: 15px 30px; border-top: 1px solid var(--border); background: var(--surface-1); border-radius: 0 0 16px 16px; }
        .btn-light { background: var(--surface-2); color: var(--text-2); border: 1px solid var(--border); }
        .btn-light:hover { background: var(--border); }
        @keyframes modalSlideIn { from { transform: translateY(-30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* Empty State */
        #emptyState { text-align: center; padding: 60px 40px; display: none; background: var(--surface-1); border-radius: 12px; }
        #emptyState .icon { font-size: 64px; margin-bottom: 20px; color: var(--text-3); }
        #emptyState h3 { font-size: 22px; margin-bottom: 10px; color: var(--text-1); }
        #emptyState p { color: var(--text-3); max-width: 400px; margin: 0 auto 20px; }

        /* Dashboard & Reports */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--surface-0); border: 1px solid var(--border); border-radius: 12px; padding: 20px; display: flex; align-items: center; gap: 15px; box-shadow: var(--shadow-1); }
        .stat-card .icon { font-size: 24px; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: var(--primary-light); color: var(--primary); }
        .stat-card .icon svg { stroke: var(--primary); }
        .stat-card-info .value { font-size: 24px; font-weight: 700; color: var(--text-1); }
        .stat-card-info .label { font-size: 13px; color: var(--text-3); }
        .section-header { font-size: 20px; font-weight: 600; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--border); color: var(--text-1); }
        .activity-item { display: flex; gap: 15px; padding: 12px 0; border-bottom: 1px solid var(--border); }
        .activity-item:last-child { border-bottom: none; }
        .activity-icon { font-size: 20px; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; }
        .activity-icon svg { stroke: var(--text-3); }
        .activity-time { font-size: 12px; color: var(--text-3); margin-top: 4px; }
        .report-card { background: var(--surface-0); border: 1px solid var(--border); border-radius: 12px; padding: 25px; box-shadow: var(--shadow-1); }
        .report-card h3 { font-size: 16px; font-weight: 500; color: var(--text-3); }
        .report-value { font-size: 32px; font-weight: 700; margin-bottom: 15px; color: var(--text-1); }

        /* Settings */
        .settings-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .settings-card { background: var(--surface-0); border: 1px solid var(--border); border-radius: 12px; padding: 25px; box-shadow: var(--shadow-1); }
        .settings-card h3 { font-size: 18px; font-weight: 600; margin-bottom: 10px; color: var(--text-1); }
        .settings-card p { color: var(--text-3); font-size: 14px; margin-bottom: 20px; min-height: 40px; }

        /* Form Elements */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 5px; font-size: 14px; color: var(--text-2); }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: 8px; font-size: 15px; transition: all 0.2s; background: var(--surface-0); color: var(--text-1); }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-light); }
        .form-group textarea { resize: vertical; min-height: 100px; }
        .form-group-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

        /* Theme Toggle */
        .theme-switch-wrapper { display: flex; align-items: center; justify-self: end; margin-top: auto; padding-top: 20px; }
        .theme-switch { display: inline-block; height: 34px; position: relative; width: 60px; }
        .theme-switch input { display:none; }
        .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; border-radius: 34px; }
        .slider:before { background-color: #fff; bottom: 4px; content: ""; height: 26px; left: 4px; position: absolute; transition: .4s; width: 26px; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(26px); }

        /* --- Responsive Design --- */
        @media (max-width: 800px) {
            body { padding: 0; height: 100vh; overflow: hidden; }
            .container { width: 100%; height: 100%; max-height: 100%; border-radius: 0; }
            .header { padding: 15px 20px; position: relative; z-index: 10; }
            .header h1 { font-size: 18px; }
            .header-stats { display: none; }
            .hamburger-menu { display: block; }
            .main-content { display: block; position: relative; }
            .sidebar { position: fixed; top: 65px; left: 0; height: calc(100% - 65px); width: 260px; transform: translateX(-100%); z-index: 5; border-right: 1px solid var(--border); }
            body.sidebar-open .sidebar { transform: translateX(0); }
            .content-area { padding: 20px; height: calc(100vh - 65px); }
            .actions-bar, .filter-bar { flex-direction: column; gap: 10px; }
            .data-grid { grid-template-columns: 1fr; }
            .card { padding: 15px; }
            .card-avatar { width: 40px; height: 40px; font-size: 16px; }
            .modal-content { width: 100%; height: 100%; max-height: 100%; margin: 0; border-radius: 0; }
            .form-group-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <!-- Authentication -->
    <div id="auth-container">
        <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
            <h2>Welcome Back!</h2>
            <p>Sign in to your book sales dashboard.</p>
            <div class="form-group"><input type="text" id="loginUsername" placeholder="Username" required></div>
            <div class="form-group"><input type="password" id="loginPassword" placeholder="Password" required></div>
            <button type="submit" class="btn btn-primary">Login</button>
            <div class="switch-form">Don't have an account? <a onclick="showAuthForm('register')">Sign Up</a></div>
        </form>

        <form id="registerForm" class="auth-form" onsubmit="handleRegister(event)">
            <h2>Create an Account</h2>
            <p>Start managing your book sales today.</p>
            <div class="form-group"><input type="text" id="registerUsername" placeholder="Username" required></div>
            <div class="form-group"><input type="password" id="registerPassword" placeholder="Password" required></div>
            <button type="submit" class="btn btn-primary">Register</button>
            <div class="switch-form">Already have an account? <a onclick="showAuthForm('login')">Log In</a></div>
        </form>
    </div>

    <!-- Main Application -->
    <div class="container">
        <header class="header">
             <button class="hamburger-menu" id="hamburgerMenu">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
            <h1 id="dashboardTitle">Dashboard</h1>
            <div class="header-stats">
                <div class="stat"><div id="totalBooks" class="stat-value">0</div><div class="stat-label">Books</div></div>
                <div class="stat"><div id="totalAuthors" class="stat-value">0</div><div class="stat-label">Authors</div></div>
                <div class="stat"><div id="totalGenres" class="stat-value">0</div><div class="stat-label">Genres</div></div>
            </div>
        </header>
        <div class="main-content">
            <aside class="sidebar">
                <div class="nav-group">
                    <button class="nav-btn active" data-view="dashboard" onclick="showView('dashboard')"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></span> Dashboard</button>
                    <button class="nav-btn" data-view="books" onclick="showView('books')"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg></span> Books</button>
                    <button class="nav-btn" data-view="genres" onclick="showView('genres')"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.432 0l6.586-6.586a2.426 2.426 0 0 0 0-3.432z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg></span> Genres</button>
                    <button class="nav-btn" data-view="reports" onclick="showView('reports')"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20V10"></path><path d="M18 20V4"></path><path d="M6 20V16"></path></svg></span> Sales Reports</button>
                    <button class="nav-btn" data-view="settings" onclick="showView('settings')"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg></span> Settings</button>
                </div>
                 <button class="nav-btn logout-btn" onclick="handleLogout()"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg></span> Logout</button>
                 <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="darkModeToggle">
                      <input type="checkbox" id="darkModeToggle" onchange="toggleTheme()">
                      <span class="slider"></span>
                    </label>
                  </div>
            </aside>
            <main class="content-area">
                <!-- Dashboard View -->
                <div id="dashboard" class="view active">
                    <div class="stats-grid">
                        <div class="stat-card"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg></div><div class="stat-card-info"><div id="dashTotalBooks" class="value">0</div><div class="label">Total Books</div></div></div>
                        <div class="stat-card"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg></div><div class="stat-card-info"><div id="dashTotalRevenue" class="value">$0</div><div class="label">Total Revenue</div></div></div>
                        <div class="stat-card"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg></div><div class="stat-card-info"><div id="dashUnitsSold" class="value">0</div><div class="label">Units Sold</div></div></div>
                        <div class="stat-card"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20V10"></path><path d="M18 20V4"></path><path d="M6 20V16"></path></svg></div><div class="stat-card-info"><div id="dashInventoryValue" class="value">$0</div><div class="label">Inventory Value</div></div></div>
                    </div>
                    <h2 class="section-header">Recent Activity</h2>
                    <div id="activityList"></div>
                </div>

                <!-- Books View -->
                <div id="books" class="view">
                    <div class="actions-bar">
                        <div class="search-box">
                            <span class="search-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></span>
                            <input type="text" id="searchInput" onkeyup="filterBooks()" placeholder="Search by title, author, or ISBN...">
                        </div>
                        <button class="btn btn-primary" onclick="openAddBookModal()"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> Add Book</button>
                    </div>
                    <div class="filter-bar">
                        <select id="genreFilter" class="filter-select" onchange="filterBooks()"><option value="">All Genres</option></select>
                        <select id="sortFilter" class="filter-select" onchange="filterBooks()"><option value="title">Sort by Title</option><option value="author">Sort by Author</option><option value="recent">Sort by Recent</option></select>
                    </div>
                    <div id="booksGrid" class="data-grid"></div>
                    <div id="emptyState">
                        <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 64px; height: 64px; stroke-width: 1.5;"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg></div>
                        <h3>No Books Yet</h3>
                        <p>Your inventory is empty. Click "Add Book" to get started!</p>
                        <button class="btn btn-primary" onclick="openAddBookModal()">Add Your First Book</button>
                    </div>
                </div>

                <!-- Genres View -->
                <div id="genres" class="view">
                    <div class="actions-bar">
                        <h2 style="flex-grow: 1; font-size: 20px; font-weight: 600;">Manage Genres</h2>
                        <button class="btn btn-primary" onclick="openAddGenreModal()">Add Genre</button>
                    </div>
                    <div id="genresGrid" class="data-grid"></div>
                </div>

                <!-- Reports View -->
                <div id="reports" class="view">
                    <h2 class="section-header">Sales Summary</h2>
                     <div class="stats-grid">
                        <div class="report-card"><h3>Total Books</h3><div id="reportTotalBooks" class="report-value">0</div></div>
                        <div class="report-card"><h3>Total Revenue</h3><div id="reportTotalRevenue" class="report-value">$0</div></div>
                        <div class="report-card"><h3>Units Sold</h3><div id="reportUnitsSold" class="report-value">0</div></div>
                        <div class="report-card"><h3>Top Genre</h3><div id="reportTopGenre" class="report-value">-</div></div>
                    </div>
                    <button class="btn btn-secondary" onclick="generateReport()">Generate Full Sales Report (CSV)</button>
                </div>

                <!-- Settings View -->
                <div id="settings" class="view">
                    <h2 class="section-header">Application Settings</h2>
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3>Export Data</h3>
                            <p>Export all your books to a CSV file for use in other applications.</p>
                            <button class="btn btn-primary" onclick="exportBooks()">Export Books (CSV)</button>
                        </div>
                        <div class="settings-card">
                            <h3>Backup Data</h3>
                            <p>Create a full backup of your books, genres, and sales in a JSON file.</p>
                            <button class="btn btn-secondary" onclick="backupData()">Create Backup</button>
                        </div>
                        <div class="settings-card">
                            <h3>Import Data</h3>
                            <p>Import data from a previously created JSON backup file.</p>
                            <button class="btn btn-light" onclick="importData()">Import from Backup</button>
                        </div>
                        <div class="settings-card">
                            <h3>Clear All Data</h3>
                            <p>Permanently delete all books, genres, and sales from this account.</p>
                            <button class="btn btn-danger" onclick="clearAllData()">Clear Data</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Book Modal -->
    <div id="bookModal" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h2 id="modalTitle">Add New Book</h2></div>
            <div class="modal-body">
                <form id="bookForm">
                    <input type="hidden" id="bookId">
                    <div class="form-group"><label for="title">Title*</label><input type="text" id="title" required></div>
                    <div class="form-group"><label for="author">Author*</label><input type="text" id="author" required></div>
                    <div class="form-group"><label for="isbn">ISBN</label><input type="text" id="isbn"></div>
                    <div class="form-group-grid">
                        <div class="form-group"><label for="publisher">Publisher</label><input type="text" id="publisher"></div>
                        <div class="form-group"><label for="publicationYear">Year</label><input type="number" id="publicationYear"></div>
                    </div>
                    <div class="form-group"><label for="genre">Genre*</label><select id="genre" required><option value="">Select Genre</option></select></div>
                    <div class="form-group-grid">
                        <div class="form-group"><label for="price">Price*</label><input type="number" id="price" step="0.01" min="0" required></div>
                        <div class="form-group"><label for="quantityInStock">Quantity in Stock*</label><input type="number" id="quantityInStock" min="0" required></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" onclick="closeBookModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveBook()">Save Book</button>
            </div>
        </div>
    </div>

    <!-- Genre Modal -->
    <div id="genreModal" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h2>Add New Genre</h2></div>
            <div class="modal-body">
                <form id="genreForm">
                    <div class="form-group"><label for="genreName">Genre Name*</label><input type="text" id="genreName" required></div>
                    <div class="form-group"><label for="genreDesc">Description</label><textarea id="genreDesc"></textarea></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" onclick="closeGenreModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveGenre()">Save Genre</button>
            </div>
        </div>
    </div>

     <!-- Log Sale Modal -->
    <div id="logSaleModal" class="modal">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header"><h2 id="logSaleModalTitle">Log Sale</h2></div>
            <div class="modal-body">
                <form id="logSaleForm">
                    <p style="margin-bottom: 20px; font-size: 16px;">Logging a sale for <strong id="logSaleBookTitle"></strong>.</p>
                    <div class="form-group"><label for="saleQuantity">Quantity*</label><input type="number" id="saleQuantity" min="1" required></div>
                    <div style="font-size: 18px; font-weight: 500; text-align: center; margin-top: 20px;">Total: <span id="logSaleTotal" style="color: var(--primary);">$0.00</span></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" onclick="closeLogSaleModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveSale()">Confirm Sale</button>
            </div>
        </div>
    </div>

    <script type="module" src="index.tsx"></script>
</body>
</html>